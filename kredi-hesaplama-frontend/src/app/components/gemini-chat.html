<div class="chat-widget" [class.open]="isOpen">
  <button class="chat-toggle" (click)="toggleChat()">ðŸ’¬</button>
  <div class="chat-box" *ngIf="isOpen">
    <div class="chat-header">
      Kredi AsistanÄ±
      <button (click)="toggleChat()">âœ–</button>
    </div>
    <div class="chat-messages">
      <div *ngFor="let msg of messages" [class.user]="msg.sender === 'user'" [class.ai]="msg.sender === 'ai'">
        <div class="message-text">{{ msg.text }}</div>
        
        <!-- Vade hesaplama sonuÃ§larÄ± iÃ§in Ã¶zel gÃ¶rÃ¼nÃ¼m -->
        <div *ngIf="msg.isKrediHesaplama && msg.krediData && msg.krediData.basarili" class="kredi-sonuc">
          <div class="kredi-detay">
            <h4>{{ msg.krediData.krediTipi }}</h4>
            <div class="kredi-bilgi">
              <div class="bilgi-satir">
                <span class="etiket">Optimal Vade:</span>
                <span class="deger">{{ msg.krediData.optimalVade }} ay</span>
              </div>
              <div class="bilgi-satir">
                <span class="etiket">AylÄ±k Taksit:</span>
                <span class="deger">{{ msg.krediData.aylikTaksit | number:'1.2-2' }} TL</span>
              </div>
              <div class="bilgi-satir">
                <span class="etiket">Toplam Ã–deme:</span>
                <span class="deger">{{ msg.krediData.toplamOdeme | number:'1.2-2' }} TL</span>
              </div>
              <div class="bilgi-satir">
                <span class="etiket">Faiz OranÄ±:</span>
                <span class="deger">%{{ msg.krediData.faizOrani }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="chat-input">
      <input [(ngModel)]="newMessage" (keydown.enter)="sendMessage()" placeholder="Ã–rnek: AylÄ±k 8000 TL gelirim var, 500000 TL konut kredisi Ã§ekmek istiyorum..." />
      <button (click)="sendMessage()">GÃ¶nder</button>
    </div>
  </div>
</div>
